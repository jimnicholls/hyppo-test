FEATURES {
    STARTADDRESS:   default = $2001;
}

SYMBOLS {
    __LOADADDR__:   type = import;
    __EXEHDR__:     type = import;
    __HIMEM__:      type = weak,    value = $C000;
}

MEMORY {
    ZP:         file = "", define = yes, start = $0002,           size = $00FE;
    LOADADDR:   file = %O,               start = %S - 2,          size = $0002;
    HEADER:     file = %O, define = yes, start = %S,              size = $0010;
    MAIN:       file = %O, define = yes, start = __HEADER_LAST__, size = __HIMEM__ - __HEADER_LAST__;
}

SEGMENTS {
    ZEROPAGE:   load = ZP,          type = zp,  optional = yes;
    LOADADDR:   load = LOADADDR,    type = ro;
    EXEHDR:     load = HEADER,      type = ro;
    STARTUP:    load = MAIN,        type = ro;
    LOWCODE:    load = MAIN,        type = ro,  optional = yes;
    CODE:       load = MAIN,        type = ro;
    RODATA:     load = MAIN,        type = ro,  optional = yes;
    DATA:       load = MAIN,        type = rw,  optional = yes;
    INIT:       load = MAIN,        type = rw,  optional = yes;
    ONCE:       load = MAIN,        type = ro,  optional = yes, define   = yes;
    BSS:        load = MAIN,        type = bss, optional = yes, define   = yes;
}
